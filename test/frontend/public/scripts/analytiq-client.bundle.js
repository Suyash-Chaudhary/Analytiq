(()=>{var e={493:(e,t,n)=>{var r=n(264);function o(e,t){var n=new r(e,t);return function(e){return n.convert(e)}}o.BIN="01",o.OCT="01234567",o.DEC="0123456789",o.HEX="0123456789abcdef",e.exports=o},264:e=>{"use strict";function t(e,t){if(!(e&&t&&e.length&&t.length))throw new Error("Bad alphabet");this.srcAlphabet=e,this.dstAlphabet=t}t.prototype.convert=function(e){var t,n,r,o={},i=this.srcAlphabet.length,a=this.dstAlphabet.length,u=e.length,c="string"==typeof e?"":[];if(!this.isValid(e))throw new Error('Number "'+e+'" contains of non-alphabetic digits ('+this.srcAlphabet+")");if(this.srcAlphabet===this.dstAlphabet)return e;for(t=0;t<u;t++)o[t]=this.srcAlphabet.indexOf(e[t]);do{for(n=0,r=0,t=0;t<u;t++)(n=n*i+o[t])>=a?(o[r++]=parseInt(n/a,10),n%=a):r>0&&(o[r++]=0);u=r,c=this.dstAlphabet.slice(n,n+1).concat(c)}while(0!==r);return c},t.prototype.isValid=function(e){for(var t=0;t<e.length;++t)if(-1===this.srcAlphabet.indexOf(e[t]))return!1;return!0},e.exports=t},943:(e,t,n)=>{const{v4:r,validate:o}=n(831),i=n(493),a={cookieBase90:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ!#$%&'()*+-./:<=>?@[]^_`{|}~",flickrBase58:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",uuid25Base36:"0123456789abcdefghijklmnopqrstuvwxyz"},u={consistentLength:!0};let c;const s=(e,t,n)=>{const r=t(e.toLowerCase().replace(/-/g,""));return n&&n.consistentLength?r.padStart(n.shortIdLength,n.paddingChar):r},l=(e,t)=>{const n=t(e).padStart(32,"0").match(/(\w{8})(\w{4})(\w{4})(\w{4})(\w{12})/);return[n[1],n[2],n[3],n[4],n[5]].join("-")};e.exports=(()=>{const e=(e,t)=>{const n=e||a.flickrBase58,c={...u,...t};if([...new Set(Array.from(n))].length!==n.length)throw new Error("The provided Alphabet has duplicate characters resulting in unreliable results");const f=(d=n.length,Math.ceil(Math.log(2**128)/Math.log(d)));var d;const p={shortIdLength:f,consistentLength:c.consistentLength,paddingChar:n[0]},h=i(i.HEX,n),v=i(n,i.HEX),y=()=>s(r(),h,p),b={alphabet:n,fromUUID:e=>s(e,h,p),maxLength:f,generate:y,new:y,toUUID:e=>l(e,v),uuid:r,validate:(e,t=!1)=>{if(!e||"string"!=typeof e)return!1;const r=c.consistentLength?e.length===f:e.length<=f,i=e.split("").every((e=>n.includes(e)));return!1===t?r&&i:r&&i&&o(l(e,v))}};return Object.freeze(b),b};return e.constants=a,e.uuid=r,e.generate=()=>(c||(c=e(a.flickrBase58).generate),c()),e})()},831:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return c.default}});var r=d(n(518)),o=d(n(948)),i=d(n(73)),a=d(n(186)),u=d(n(808)),c=d(n(775)),s=d(n(37)),l=d(n(910)),f=d(n(792));function d(e){return e&&e.__esModule?e:{default:e}}},311:(e,t)=>{"use strict";function n(e){return 14+(e+64>>>9<<4)+1}function r(e,t){const n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t,n,o,i,a){return r((u=r(r(t,e),r(o,a)))<<(c=i)|u>>>32-c,n);var u,c}function i(e,t,n,r,i,a,u){return o(t&n|~t&r,e,t,i,a,u)}function a(e,t,n,r,i,a,u){return o(t&r|n&~r,e,t,i,a,u)}function u(e,t,n,r,i,a,u){return o(t^n^r,e,t,i,a,u)}function c(e,t,n,r,i,a,u){return o(n^(t|~r),e,t,i,a,u)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e[n]=t.charCodeAt(n)}return function(e){const t=[],n=32*e.length,r="0123456789abcdef";for(let o=0;o<n;o+=8){const n=e[o>>5]>>>o%32&255,i=parseInt(r.charAt(n>>>4&15)+r.charAt(15&n),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[n(t)-1]=t;let o=1732584193,s=-271733879,l=-1732584194,f=271733878;for(let t=0;t<e.length;t+=16){const n=o,d=s,p=l,h=f;o=i(o,s,l,f,e[t],7,-680876936),f=i(f,o,s,l,e[t+1],12,-389564586),l=i(l,f,o,s,e[t+2],17,606105819),s=i(s,l,f,o,e[t+3],22,-1044525330),o=i(o,s,l,f,e[t+4],7,-176418897),f=i(f,o,s,l,e[t+5],12,1200080426),l=i(l,f,o,s,e[t+6],17,-1473231341),s=i(s,l,f,o,e[t+7],22,-45705983),o=i(o,s,l,f,e[t+8],7,1770035416),f=i(f,o,s,l,e[t+9],12,-1958414417),l=i(l,f,o,s,e[t+10],17,-42063),s=i(s,l,f,o,e[t+11],22,-1990404162),o=i(o,s,l,f,e[t+12],7,1804603682),f=i(f,o,s,l,e[t+13],12,-40341101),l=i(l,f,o,s,e[t+14],17,-1502002290),s=i(s,l,f,o,e[t+15],22,1236535329),o=a(o,s,l,f,e[t+1],5,-165796510),f=a(f,o,s,l,e[t+6],9,-1069501632),l=a(l,f,o,s,e[t+11],14,643717713),s=a(s,l,f,o,e[t],20,-373897302),o=a(o,s,l,f,e[t+5],5,-701558691),f=a(f,o,s,l,e[t+10],9,38016083),l=a(l,f,o,s,e[t+15],14,-660478335),s=a(s,l,f,o,e[t+4],20,-405537848),o=a(o,s,l,f,e[t+9],5,568446438),f=a(f,o,s,l,e[t+14],9,-1019803690),l=a(l,f,o,s,e[t+3],14,-187363961),s=a(s,l,f,o,e[t+8],20,1163531501),o=a(o,s,l,f,e[t+13],5,-1444681467),f=a(f,o,s,l,e[t+2],9,-51403784),l=a(l,f,o,s,e[t+7],14,1735328473),s=a(s,l,f,o,e[t+12],20,-1926607734),o=u(o,s,l,f,e[t+5],4,-378558),f=u(f,o,s,l,e[t+8],11,-2022574463),l=u(l,f,o,s,e[t+11],16,1839030562),s=u(s,l,f,o,e[t+14],23,-35309556),o=u(o,s,l,f,e[t+1],4,-1530992060),f=u(f,o,s,l,e[t+4],11,1272893353),l=u(l,f,o,s,e[t+7],16,-155497632),s=u(s,l,f,o,e[t+10],23,-1094730640),o=u(o,s,l,f,e[t+13],4,681279174),f=u(f,o,s,l,e[t],11,-358537222),l=u(l,f,o,s,e[t+3],16,-722521979),s=u(s,l,f,o,e[t+6],23,76029189),o=u(o,s,l,f,e[t+9],4,-640364487),f=u(f,o,s,l,e[t+12],11,-421815835),l=u(l,f,o,s,e[t+15],16,530742520),s=u(s,l,f,o,e[t+2],23,-995338651),o=c(o,s,l,f,e[t],6,-198630844),f=c(f,o,s,l,e[t+7],10,1126891415),l=c(l,f,o,s,e[t+14],15,-1416354905),s=c(s,l,f,o,e[t+5],21,-57434055),o=c(o,s,l,f,e[t+12],6,1700485571),f=c(f,o,s,l,e[t+3],10,-1894986606),l=c(l,f,o,s,e[t+10],15,-1051523),s=c(s,l,f,o,e[t+1],21,-2054922799),o=c(o,s,l,f,e[t+8],6,1873313359),f=c(f,o,s,l,e[t+15],10,-30611744),l=c(l,f,o,s,e[t+6],15,-1560198380),s=c(s,l,f,o,e[t+13],21,1309151649),o=c(o,s,l,f,e[t+4],6,-145523070),f=c(f,o,s,l,e[t+11],10,-1120210379),l=c(l,f,o,s,e[t+2],15,718787259),s=c(s,l,f,o,e[t+9],21,-343485551),o=r(o,n),s=r(s,d),l=r(l,p),f=r(f,h)}return[o,s,l,f]}(function(e){if(0===e.length)return[];const t=8*e.length,r=new Uint32Array(n(t));for(let n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}},140:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=n},808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},792:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(37))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");let t;const n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}},656:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},858:(e,t)=>{"use strict";let n;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!n&&(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!n))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)};const r=new Uint8Array(16)},42:(e,t)=>{"use strict";function n(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:case 3:return t^n^r;case 2:return t&n^t&r^n&r}}function r(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],o=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const i=e.length/4+2,a=Math.ceil(i/16),u=new Array(a);for(let t=0;t<a;++t){const n=new Uint32Array(16);for(let r=0;r<16;++r)n[r]=e[64*t+4*r]<<24|e[64*t+4*r+1]<<16|e[64*t+4*r+2]<<8|e[64*t+4*r+3];u[t]=n}u[a-1][14]=8*(e.length-1)/Math.pow(2,32),u[a-1][14]=Math.floor(u[a-1][14]),u[a-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<a;++e){const i=new Uint32Array(80);for(let t=0;t<16;++t)i[t]=u[e][t];for(let e=16;e<80;++e)i[e]=r(i[e-3]^i[e-8]^i[e-14]^i[e-16],1);let a=o[0],c=o[1],s=o[2],l=o[3],f=o[4];for(let e=0;e<80;++e){const o=Math.floor(e/20),u=r(a,5)+n(o,c,s,l)+f+t[o]+i[e]>>>0;f=l,l=s,s=r(c,30)>>>0,c=a,a=u}o[0]=o[0]+a>>>0,o[1]=o[1]+c>>>0,o[2]=o[2]+s>>>0,o[3]=o[3]+l>>>0,o[4]=o[4]+f>>>0}return[o[0]>>24&255,o[0]>>16&255,o[0]>>8&255,255&o[0],o[1]>>24&255,o[1]>>16&255,o[1]>>8&255,255&o[1],o[2]>>24&255,o[2]>>16&255,o[2]>>8&255,255&o[2],o[3]>>24&255,o[3]>>16&255,o[3]>>8&255,255&o[3],o[4]>>24&255,o[4]>>16&255,o[4]>>8&255,255&o[4]]}},910:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=a;var r,o=(r=n(37))&&r.__esModule?r:{default:r};const i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));function a(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}t.default=function(e,t=0){const n=a(e,t);if(!(0,o.default)(n))throw TypeError("Stringified UUID is invalid");return n}},518:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(858))&&r.__esModule?r:{default:r},i=n(910);let a,u,c=0,s=0;t.default=function(e,t,n){let r=t&&n||0;const l=t||new Array(16);let f=(e=e||{}).node||a,d=void 0!==e.clockseq?e.clockseq:u;if(null==f||null==d){const t=e.random||(e.rng||o.default)();null==f&&(f=a=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=u=16383&(t[6]<<8|t[7]))}let p=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:s+1;const v=p-c+(h-s)/1e4;if(v<0&&void 0===e.clockseq&&(d=d+1&16383),(v<0||p>c)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=p,s=h,u=d,p+=122192928e5;const y=(1e4*(268435455&p)+h)%4294967296;l[r++]=y>>>24&255,l[r++]=y>>>16&255,l[r++]=y>>>8&255,l[r++]=255&y;const b=p/4294967296*1e4&268435455;l[r++]=b>>>8&255,l[r++]=255&b,l[r++]=b>>>24&15|16,l[r++]=b>>>16&255,l[r++]=d>>>8|128,l[r++]=255&d;for(let e=0;e<6;++e)l[r+e]=f[e];return t||(0,i.unsafeStringify)(l)}},948:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(25)),o=i(n(311));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v3",48,o.default);t.default=a},25:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,n){function r(e,r,a,u){var c;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=(0,i.default)(r)),16!==(null===(c=r)||void 0===c?void 0:c.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let s=new Uint8Array(16+e.length);if(s.set(r),s.set(e,r.length),s=n(s),s[6]=15&s[6]|t,s[8]=63&s[8]|128,a){u=u||0;for(let e=0;e<16;++e)a[u+e]=s[e];return a}return(0,o.unsafeStringify)(s)}try{r.name=e}catch(e){}return r.DNS=a,r.URL=u,r};var r,o=n(910),i=(r=n(792))&&r.__esModule?r:{default:r};const a="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=a;const u="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=u},73:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(140)),o=a(n(858)),i=n(910);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,n){if(r.default.randomUUID&&!t&&!e)return r.default.randomUUID();const a=(e=e||{}).random||(e.rng||o.default)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=a[e];return t}return(0,i.unsafeStringify)(a)}},186:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(25)),o=i(n(42));function i(e){return e&&e.__esModule?e:{default:e}}var a=(0,r.default)("v5",80,o.default);t.default=a},37:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(656))&&r.__esModule?r:{default:r};t.default=function(e){return"string"==typeof e&&o.default.test(e)}},775:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,o=(r=n(37))&&r.__esModule?r:{default:r};t.default=function(e){if(!(0,o.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=function(){function e(){}return e.MAX_BUFFER_SIZE=2e3,e.EVENT_BUFFER_TIMEOUT=2e3,e.MAX_RECONNECT_ATTEMPTS=10,e.MAX_RECONNECT_INTERVAL=3e4,e.RECONNECT_INTERVAL=1e3,e}();const t=function(){var t=[],n=[];return[function(n){t.length>=e.MAX_BUFFER_SIZE&&t.shift(),t.push(n)},function(e){return r=void 0,o=void 0,a=function(){var r;return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(o){switch(o.label){case 0:return e&&e.readyState?(t=(r=[n,t])[0],n=r[1],[4,e.send(JSON.stringify({events:t}))]):[3,2];case 1:o.sent(),t=[],o.label=2;case 2:return[2]}}))},new((i=void 0)||(i=Promise))((function(e,t){function n(e){try{c(a.next(e))}catch(e){t(e)}}function u(e){try{c(a.throw(e))}catch(e){t(e)}}function c(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(n,u)}c((a=a.apply(r,o||[])).next())}));var r,o,i,a}]};var r=function(){function e(){var e,n;this.browser=(n=navigator.userAgent).indexOf("Edg")>-1?"edge":n.indexOf("Chrome")>-1?"chrome":n.indexOf("Firefox")>-1?"firefox":n.indexOf("Safari")>-1?"safari":n.indexOf("Opera")>-1?"opera":n.indexOf("Trident")>-1||n.indexOf("MSIE")>-1?"ie":"unknown",this.subdomain=window.location.hostname,this.page=window.location.hostname+window.location.pathname,this.firstLoad=!0,this.reconnectAttempts=0,e=t(),this.addEvent=e[0],this.sendEvents=e[1]}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e._instance=null,e}();r.instance();const o=r;function i(){var e=o.instance();setTimeout((function(){var t=window.location.hostname+window.location.pathname;e.page!=t&&(e.page=t,e.addEvent({id:e.id,ip:e.ip,type:"navigation",page:e.page,html:document.documentElement.outerHTML,timeStamp:performance.now()})),i()}),1e3)}const a=function(){return e=void 0,t=void 0,r=function(){return function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}}(this,(function(e){return[2,new Promise((function(e,t){fetch("https://api.ipify.org?format=json").then((function(e){return e.json()})).then((function(t){return e(t.ip)})).catch((function(e){return t(e)}))}))]}))},new((n=void 0)||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}));var e,t,n,r};var u=n(943),c=n.n(u),s=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function u(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}c((r=r.apply(e,t||[])).next())}))},l=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=u(0),a.throw=u(1),a.return=u(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,u[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,r=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=t.call(e,i)}catch(e){u=[6,e],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};const f=function(){function t(){}return t._handleEventBufferTimeout=function(){return s(this,void 0,void 0,(function(){var t=this;return l(this,(function(n){return o.instance().eventBufferTimeout=window.setTimeout((function(){return s(t,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return[4,o.instance().sendEvents(this._socket)];case 1:return e.sent(),this._handleEventBufferTimeout(),[2]}}))}))}),e.EVENT_BUFFER_TIMEOUT),[2]}))}))},t._handleOpen=function(){return s(this,void 0,void 0,(function(){var e,t,n,r;return l(this,(function(i){switch(i.label){case 0:return(e=o.instance()).reconnectAttempts=0,t=e,(n=e.ip)?[3,2]:[4,a()];case 1:n=i.sent(),i.label=2;case 2:return t.ip=n,e.id=e.id||c().generate(),r={type:e.firstLoad?"connection":"reconnetion",ip:e.ip,id:e.id,html:document.documentElement.outerHTML,subdomain:e.subdomain,page:e.page,timeStamp:performance.now()},this._socket.send(JSON.stringify(r)),e.firstLoad=!1,this._handleEventBufferTimeout(),[2]}}))}))},t._handleClose=function(){var e=o.instance();e.eventBufferTimeout&&clearTimeout(e.eventBufferTimeout),this.reconnect()},t._handleError=function(){this._socket.close()},t.connect=function(){return s(this,void 0,void 0,(function(){var e=this;return l(this,(function(t){return this._socket=new WebSocket("ws://analytiq.in/api/v1/visitorwss"),this._socket.addEventListener("open",(function(){return e._handleOpen()})),this._socket.addEventListener("close",(function(){return e._handleClose()})),this._socket.addEventListener("error",(function(){return e._handleError()})),[2]}))}))},t.reconnect=function(){return s(this,void 0,void 0,(function(){var t,n=this;return l(this,(function(r){return(t=o.instance()).reconnectAttempts<e.MAX_RECONNECT_ATTEMPTS?setTimeout((function(){return s(n,void 0,void 0,(function(){return l(this,(function(e){switch(e.label){case 0:return console.log({attempts:t.reconnectAttempts}),t.reconnectAttempts++,[4,this.connect()];case 1:return e.sent(),[2]}}))}))}),Math.min(e.RECONNECT_INTERVAL*Math.pow(2,t.reconnectAttempts),e.MAX_RECONNECT_INTERVAL)):console.log("Max connection attemps have be reached."),[2]}))}))},t._socket=null,t}();var d;d=o.instance(),window.addEventListener("mousemove",(function(e){d.addEvent({id:d.id,ip:d.ip,type:"mousemove",x:e.x,y:e.y,timeStamp:e.timeStamp})})),window.addEventListener("resize",(function(e){d.addEvent({id:d.id,ip:d.ip,type:"resize",width:e.currentTarget.innerWidth,height:e.currentTarget.innerHeight,timeStamp:e.timeStamp})})),window.addEventListener("visibilitychange",(function(e){d.addEvent({id:d.id,ip:d.ip,type:"visibilitychange",visibility:document.visibilityState,timeStamp:e.timeStamp})})),window.addEventListener("scroll",(function(e){d.addEvent({id:d.id,ip:d.ip,type:"scroll",x:window.scrollX,y:window.scrollY,timeStamp:e.timeStamp})})),window.addEventListener("click",(function(e){d.addEvent({id:d.id,ip:d.ip,type:"click",x:e.x,y:e.y,timeStamp:e.timeStamp})})),["firefox","safari","unknown"].includes(d.browser)?i():navigation.addEventListener("navigate",(function(){d.page=window.location.hostname+window.location.pathname,d.addEvent({id:d.id,ip:d.ip,type:"navigation",page:d.page,html:document.documentElement.outerHTML,timeStamp:performance.now()})})),f.connect()})()})();